- grant ||= @grant || Grant.new_with_defaults
- grant_person ||= @grant_person || GrantPerson.new_with_defaults unless grant_person.present?
- grant_person_counter ||= nil

= fields_for :grant, grant do |f|
  = f.fields_for :grant_people, grant_person, :child_index => grant_person_counter || 'field_counter' do |gpf|
    %fieldset.list_item
      %p.twocol.reversed
        %span.col.first>
          = gpf.text_field :role, placeholder: t("placeholders.grant_person.role"), required: true, data: {role: "rolepicker"}, class: "strong"
        %span.col.last>
          = gpf.check_box :applicant
          = gpf.label(:applicant, class: "inline") do
            Primary contact for this grant
            %span.formnote
              = t "notes.grant.applicant"

      = render "cdb_client/people/pick_or_add", f: gpf, person: grant_person.person, association: :person, person_uid_field: :person_uid, required: true
